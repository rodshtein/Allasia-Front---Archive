
# Что это
Это приложение-каталог зарубежных клиник, с отзывами врачами акциями и.т.п. 
Фронт написан на Sapper. Бэкэнд на KeysoneJs
<br>

Компания для которой делался сайт закрылась. Сайт есть в моем архиве в виде статической версии.
<br>

Посмотреть можно тут: [allasia.rodshtein.xyzr](https://allasia.rodshtein.xyz)
<br>
<br>
# Что посмотреть   

## Библиотека для галереек Nailer
У меня на гитхабе https://github.com/rodshtein/nailer
Это headless решение, без сторонних библиотек. Построено на базе use функции Svelte.

Поскольку это headless у неё нет стилей оформления.<br>
Галлерею можно сделать из любого элемента. Главное условие, чтобы целевая нода была с переполнением по оcи x, тогда случится магия и блок превратится в скролл элемент. 

Она умеет умирать, когда у элемента пропадает скролл. Умеет подстраиваться под мутации. Умеет по разному позиционировать первый и последний элемент, что позволяет делать сроллеры как в приложениях iOS.

Посмотреть в работе можно тут [allasia.rodshtein.xyzr](https://allasia.rodshtein.xyz)

Код тут: [/src/components/nailer](/src/components/nailer)
<br>
<br>

## Решение разбивки колонок меню
Нужно было сделать адаптивную вёрстку колонок, чтобы:
- Был классический вывод элементов колонок: сверху вниз, слева на право.
- У каждой колонки был футер и хедер.
- Колонки были адаптивные.

Js размечает колонки хэлпер-стилями на этапе отрисовки. 

Код тут: [/src/helpers.js:260](/src/helpers.js#L260)

Пример использования тут: [/src/components/branches/Branches-menu.svelte](/src/components/branches/Branches-menu.svelte)
<br>
<br>
## Реализация простого поиска на клиенте
Помню, что тут было несколько вызовов:
 - Сохранить результаты поиска пользователя: если пользователь что-то искал, то возврат в меню всегда будет на то место, с которого он ушел.
 - Сделать поиск по разделам и услугам. При этом разделить разделы услуги в разделах.
 - Учесть сценарий, где пользователь проваливается в раздел, и потом может вернутся обратно к результатам поиска. 
 - Плюс нужно было учесть разные сценарии работы с поиском и переходом по страницам и хоткеи.

Код тут: [src/components/search/Search-box.svelte](/src/components/search/Search-box.svelte)
<br>
<br>

## Фэйд фоновой картинки в преобладающий цвет
Тут я считал преобладающий цвет картинки на фоне, и строил поверх него градиент с переходом в прозрачность (см. скрин ниже).

Для подсчёта преобладающего цвета используется готовое решение. Оказалось достаточно нетривиальная задача быстро просчитывать цвет и не подвесить всю отрисовку. 

Вызовом было сделать так, чтобы до загрузки картинки ставить фэллбэк заливку, и ставить градиент после отрисовки картинки. С этим были проблемы на медленных соединениях. 

Код тут: [/src/color-filter.js](/src/color-filter.js)